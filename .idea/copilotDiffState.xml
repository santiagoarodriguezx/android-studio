<?xml version="1.0" encoding="UTF-8"?>
<project version="4">
  <component name="CopilotDiffPersistence">
    <option name="pendingDiffs">
      <map>
        <entry key="$PROJECT_DIR$/app/src/main/java/com/example/myapplication/examples/AuthExampleJava.java">
          <value>
            <PendingDiffInfo>
              <option name="filePath" value="$PROJECT_DIR$/app/src/main/java/com/example/myapplication/examples/AuthExampleJava.java" />
              <option name="originalContent" value="package com.example.myapplication.examples;&#10;&#10;/**&#10; * EJEMPLO: Cómo usar el AuthRepository en Java&#10; *&#10; * Este archivo muestra cómo consumir la API de autenticación usando Java&#10; * en lugar de Kotlin. Puedes usar este código como referencia.&#10; */&#10;&#10;import android.content.Context;&#10;import com.example.myapplication.data.local.TokenManager;&#10;import com.example.myapplication.data.repository.AuthRepository;&#10;import com.example.myapplication.data.models.LoginResponse;&#10;import com.example.myapplication.data.models.RegisterResponse;&#10;import com.example.myapplication.data.models.UserInfo;&#10;import kotlin.Result;&#10;import kotlinx.coroutines.CoroutineScope;&#10;import kotlinx.coroutines.Dispatchers;&#10;import kotlinx.coroutines.launch;&#10;&#10;public class AuthExampleJava {&#10;&#10;    private AuthRepository authRepository;&#10;    private CoroutineScope coroutineScope = CoroutineScope.INSTANCE;&#10;&#10;    public AuthExampleJava(Context context) {&#10;        TokenManager tokenManager = new TokenManager(context);&#10;        this.authRepository = new AuthRepository(tokenManager);&#10;    }&#10;&#10;    /**&#10;     * EJEMPLO 1: Login de usuario&#10;     */&#10;    public void loginExample(String email, String password) {&#10;        CoroutineScope.launch(Dispatchers.getIO(), (scope, continuation) -&gt; {&#10;            // Llamar al método login del repository&#10;            Result&lt;LoginResponse&gt; result = authRepository.login(email, password, continuation);&#10;&#10;            // Manejar el resultado&#10;            if (result instanceof Result.Success) {&#10;                LoginResponse response = ((Result.Success&lt;LoginResponse&gt;) result).getValue();&#10;&#10;                if (response.getSuccess()) {&#10;                    if (response.getRequires2FA()) {&#10;                        // Usuario necesita ingresar código 2FA&#10;                        System.out.println(&quot;Se requiere 2FA&quot;);&#10;                        // Mostrar pantalla de 2FA&#10;                    } else {&#10;                        // Login exitoso&#10;                        System.out.println(&quot;Login exitoso: &quot; + response.getUser().getName());&#10;                        // Navegar a pantalla principal&#10;                    }&#10;                }&#10;            } else if (result instanceof Result.Failure) {&#10;                Throwable error = ((Result.Failure&lt;LoginResponse&gt;) result).getException();&#10;                System.err.println(&quot;Error en login: &quot; + error.getMessage());&#10;            }&#10;&#10;            return null;&#10;        });&#10;    }&#10;&#10;    /**&#10;     * EJEMPLO 2: Registro de usuario&#10;     */&#10;    public void registerExample(String email, String password, String name) {&#10;        CoroutineScope.launch(Dispatchers.getIO(), (scope, continuation) -&gt; {&#10;            Result&lt;RegisterResponse&gt; result = authRepository.register(&#10;                email,&#10;                password,&#10;                name,&#10;                null,  // companyId (opcional)&#10;                null,  // phone (opcional)&#10;                continuation&#10;            );&#10;&#10;            if (result instanceof Result.Success) {&#10;                RegisterResponse response = ((Result.Success&lt;RegisterResponse&gt;) result).getValue();&#10;&#10;                if (response.getSuccess()) {&#10;                    System.out.println(&quot;Registro exitoso: &quot; + response.getMessage());&#10;                    // Mostrar mensaje al usuario&#10;                    // El usuario debe verificar su email&#10;                }&#10;            } else {&#10;                System.err.println(&quot;Error en registro&quot;);&#10;            }&#10;&#10;            return null;&#10;        });&#10;    }&#10;&#10;    /**&#10;     * EJEMPLO 3: Verificación 2FA&#10;     */&#10;    public void verify2FAExample(String email, String code) {&#10;        CoroutineScope.launch(Dispatchers.getIO(), (scope, continuation) -&gt; {&#10;            Result&lt;LoginResponse&gt; result = authRepository.verify2FA(email, code, continuation);&#10;&#10;            if (result instanceof Result.Success) {&#10;                LoginResponse response = ((Result.Success&lt;LoginResponse&gt;) result).getValue();&#10;&#10;                if (response.getSuccess()) {&#10;                    System.out.println(&quot;2FA verificado correctamente&quot;);&#10;                    // Navegar a pantalla principal&#10;                }&#10;            } else {&#10;                System.err.println(&quot;Código 2FA inválido&quot;);&#10;            }&#10;&#10;            return null;&#10;        });&#10;    }&#10;&#10;    /**&#10;     * EJEMPLO 4: Obtener información del usuario actual&#10;     */&#10;    public void getCurrentUserExample() {&#10;        CoroutineScope.launch(Dispatchers.getIO(), (scope, continuation) -&gt; {&#10;            Result&lt;UserInfo&gt; result = authRepository.getCurrentUser(continuation);&#10;&#10;            if (result instanceof Result.Success) {&#10;                UserInfo user = ((Result.Success&lt;UserInfo&gt;) result).getValue();&#10;&#10;                System.out.println(&quot;Usuario actual:&quot;);&#10;                System.out.println(&quot;Nombre: &quot; + user.getName());&#10;                System.out.println(&quot;Email: &quot; + user.getEmail());&#10;                System.out.println(&quot;Email verificado: &quot; + user.getEmailVerified());&#10;                System.out.println(&quot;2FA habilitado: &quot; + user.getTwoFactorEnabled());&#10;            } else {&#10;                System.err.println(&quot;No se pudo obtener información del usuario&quot;);&#10;            }&#10;&#10;            return null;&#10;        });&#10;    }&#10;&#10;    /**&#10;     * EJEMPLO 5: Solicitar reset de contraseña&#10;     */&#10;    public void forgotPasswordExample(String email) {&#10;        CoroutineScope.launch(Dispatchers.getIO(), (scope, continuation) -&gt; {&#10;            Result&lt;kotlin.Unit&gt; result = authRepository.requestPasswordReset(email, continuation);&#10;&#10;            if (result instanceof Result.Success) {&#10;                System.out.println(&quot;Email de recuperación enviado&quot;);&#10;                // Mostrar mensaje al usuario&#10;            } else {&#10;                System.err.println(&quot;Error al enviar email&quot;);&#10;            }&#10;&#10;            return null;&#10;        });&#10;    }&#10;&#10;    /**&#10;     * EJEMPLO 6: Logout&#10;     */&#10;    public void logoutExample() {&#10;        CoroutineScope.launch(Dispatchers.getIO(), (scope, continuation) -&gt; {&#10;            Result&lt;kotlin.Unit&gt; result = authRepository.logout(continuation);&#10;&#10;            // Siempre limpia los tokens localmente&#10;            System.out.println(&quot;Sesión cerrada&quot;);&#10;            // Navegar a pantalla de login&#10;&#10;            return null;&#10;        });&#10;    }&#10;&#10;    /**&#10;     * EJEMPLO 7: Verificar si el usuario está logueado&#10;     */&#10;    public void checkLoginStatusExample() {&#10;        CoroutineScope.launch(Dispatchers.getIO(), (scope, continuation) -&gt; {&#10;            boolean isLoggedIn = authRepository.isLoggedIn(continuation);&#10;&#10;            if (isLoggedIn) {&#10;                System.out.println(&quot;Usuario está autenticado&quot;);&#10;                // Mostrar pantalla principal&#10;            } else {&#10;                System.out.println(&quot;Usuario no autenticado&quot;);&#10;                // Mostrar pantalla de login&#10;            }&#10;&#10;            return null;&#10;        });&#10;    }&#10;}&#10;&#10;/**&#10; * CÓMO USAR EN UNA ACTIVITY DE JAVA:&#10; *&#10; * public class LoginActivity extends AppCompatActivity {&#10; *&#10; *     private AuthExampleJava authExample;&#10; *&#10; *     @Override&#10; *     protected void onCreate(Bundle savedInstanceState) {&#10; *         super.onCreate(savedInstanceState);&#10; *         setContentView(R.layout.activity_login);&#10; *&#10; *         authExample = new AuthExampleJava(this);&#10; *&#10; *         Button loginButton = findViewById(R.id.loginButton);&#10; *         EditText emailInput = findViewById(R.id.emailInput);&#10; *         EditText passwordInput = findViewById(R.id.passwordInput);&#10; *&#10; *         loginButton.setOnClickListener(v -&gt; {&#10; *             String email = emailInput.getText().toString();&#10; *             String password = passwordInput.getText().toString();&#10; *&#10; *             authExample.loginExample(email, password);&#10; *         });&#10; *     }&#10; * }&#10; */&#10;&#10;/**&#10; * NOTA IMPORTANTE:&#10; *&#10; * Este proyecto está principalmente diseñado para Kotlin con Jetpack Compose.&#10; * Si prefieres usar Java con XML layouts tradicionales, necesitarás:&#10; *&#10; * 1. Crear layouts XML en res/layout/&#10; * 2. Crear Activities tradicionales (no Compose)&#10; * 3. Adaptar el código de coroutines a callbacks o RxJava&#10; * 4. Usar LiveData en lugar de StateFlow&#10; *&#10; * Recomendación: Usar Kotlin con Compose es más moderno y simple.&#10; */&#10;&#10;" />
              <option name="updatedContent" value="package com.example.myapplication.examples;&#10;&#10;/**&#10; * EJEMPLO: Cómo usar el AuthRepository en Java&#10; *&#10; * Este archivo muestra cómo consumir la API de autenticación usando Java&#10; * en lugar de Kotlin. Puedes usar este código como referencia.&#10; */&#10;&#10;import android.content.Context;&#10;import android.util.Log;&#10;import com.example.myapplication.data.local.TokenManager;&#10;import com.example.myapplication.data.repository.AuthRepository;&#10;import com.example.myapplication.data.models.LoginResponse;&#10;import com.example.myapplication.data.models.RegisterResponse;&#10;import com.example.myapplication.data.models.UserInfo;&#10;import kotlinx.coroutines.CoroutineScope;&#10;import kotlinx.coroutines.Dispatchers;&#10;import kotlinx.coroutines.BuildersKt;&#10;import kotlin.coroutines.Continuation;&#10;import kotlin.coroutines.CoroutineContext;&#10;import kotlin.coroutines.EmptyCoroutineContext;&#10;import org.jetbrains.annotations.NotNull;&#10;&#10;public class AuthExampleJava {&#10;&#10;    private static final String TAG = &quot;AuthExampleJava&quot;;&#10;    private AuthRepository authRepository;&#10;    private CoroutineScope coroutineScope;&#10;&#10;    public AuthExampleJava(Context context) {&#10;        TokenManager tokenManager = new TokenManager(context);&#10;        this.authRepository = new AuthRepository(tokenManager);&#10;        this.coroutineScope = CoroutineScope.INSTANCE.invoke(Dispatchers.getMain());&#10;    }&#10;&#10;    /**&#10;     * EJEMPLO 1: Login de usuario&#10;     */&#10;    public void loginExample(String email, String password) {&#10;        BuildersKt.launch(coroutineScope, Dispatchers.getIO(), null, (scope, continuation) -&gt; {&#10;            try {&#10;                // Llamar al método login del repository&#10;                LoginResponse response = authRepository.login(email, password, continuation);&#10;&#10;                // Manejar el resultado&#10;                if (response != null &amp;&amp; response.getSuccess()) {&#10;                    if (response.getRequires2FA()) {&#10;                        // Usuario necesita ingresar código 2FA&#10;                        Log.d(TAG, &quot;Se requiere 2FA&quot;);&#10;                        // Mostrar pantalla de 2FA&#10;                    } else {&#10;                        // Login exitoso&#10;                        Log.d(TAG, &quot;Login exitoso: &quot; + response.getUser().getName());&#10;                        // Navegar a pantalla principal&#10;                    }&#10;                }&#10;            } catch (Exception e) {&#10;                Log.e(TAG, &quot;Error en login: &quot; + e.getMessage(), e);&#10;            }&#10;&#10;            return kotlin.Unit.INSTANCE;&#10;        });&#10;    }&#10;&#10;    /**&#10;     * EJEMPLO 2: Registro de usuario&#10;     */&#10;    public void registerExample(String email, String password, String name) {&#10;        BuildersKt.launch(coroutineScope, Dispatchers.getIO(), null, (scope, continuation) -&gt; {&#10;            try {&#10;                RegisterResponse response = authRepository.register(&#10;                    email,&#10;                    password,&#10;                    name,&#10;                    null,  // companyId (opcional)&#10;                    null,  // phone (opcional)&#10;                    continuation&#10;                );&#10;&#10;                if (response != null &amp;&amp; response.getSuccess()) {&#10;                    Log.d(TAG, &quot;Registro exitoso: &quot; + response.getMessage());&#10;                    // Mostrar mensaje al usuario&#10;                    // El usuario debe verificar su email&#10;                }&#10;            } catch (Exception e) {&#10;                Log.e(TAG, &quot;Error en registro: &quot; + e.getMessage(), e);&#10;            }&#10;&#10;            return kotlin.Unit.INSTANCE;&#10;        });&#10;    }&#10;&#10;    /**&#10;     * EJEMPLO 3: Verificación 2FA&#10;     */&#10;    public void verify2FAExample(String email, String code) {&#10;        BuildersKt.launch(coroutineScope, Dispatchers.getIO(), null, (scope, continuation) -&gt; {&#10;            try {&#10;                LoginResponse response = authRepository.verify2FA(email, code, continuation);&#10;&#10;                if (response != null &amp;&amp; response.getSuccess()) {&#10;                    Log.d(TAG, &quot;2FA verificado correctamente&quot;);&#10;                    // Navegar a pantalla principal&#10;                }&#10;            } catch (Exception e) {&#10;                Log.e(TAG, &quot;Código 2FA inválido: &quot; + e.getMessage(), e);&#10;            }&#10;&#10;            return kotlin.Unit.INSTANCE;&#10;        });&#10;    }&#10;&#10;    /**&#10;     * EJEMPLO 4: Obtener información del usuario actual&#10;     */&#10;    public void getCurrentUserExample() {&#10;        BuildersKt.launch(coroutineScope, Dispatchers.getIO(), null, (scope, continuation) -&gt; {&#10;            try {&#10;                UserInfo user = authRepository.getCurrentUser(continuation);&#10;&#10;                if (user != null) {&#10;                    Log.d(TAG, &quot;Usuario actual:&quot;);&#10;                    Log.d(TAG, &quot;Nombre: &quot; + user.getName());&#10;                    Log.d(TAG, &quot;Email: &quot; + user.getEmail());&#10;                    Log.d(TAG, &quot;Email verificado: &quot; + user.getEmailVerified());&#10;                    Log.d(TAG, &quot;2FA habilitado: &quot; + user.getTwoFactorEnabled());&#10;                }&#10;            } catch (Exception e) {&#10;                Log.e(TAG, &quot;No se pudo obtener información del usuario: &quot; + e.getMessage(), e);&#10;            }&#10;&#10;            return kotlin.Unit.INSTANCE;&#10;        });&#10;    }&#10;&#10;    /**&#10;     * EJEMPLO 5: Solicitar reset de contraseña&#10;     */&#10;    public void forgotPasswordExample(String email) {&#10;        BuildersKt.launch(coroutineScope, Dispatchers.getIO(), null, (scope, continuation) -&gt; {&#10;            try {&#10;                authRepository.requestPasswordReset(email, continuation);&#10;                Log.d(TAG, &quot;Email de recuperación enviado&quot;);&#10;                // Mostrar mensaje al usuario&#10;            } catch (Exception e) {&#10;                Log.e(TAG, &quot;Error al enviar email: &quot; + e.getMessage(), e);&#10;            }&#10;&#10;            return kotlin.Unit.INSTANCE;&#10;        });&#10;    }&#10;&#10;    /**&#10;     * EJEMPLO 6: Logout&#10;     */&#10;    public void logoutExample() {&#10;        BuildersKt.launch(coroutineScope, Dispatchers.getIO(), null, (scope, continuation) -&gt; {&#10;            try {&#10;                authRepository.logout(continuation);&#10;                Log.d(TAG, &quot;Sesión cerrada&quot;);&#10;                // Navegar a pantalla de login&#10;            } catch (Exception e) {&#10;                Log.e(TAG, &quot;Error en logout: &quot; + e.getMessage(), e);&#10;            }&#10;&#10;            return kotlin.Unit.INSTANCE;&#10;        });&#10;    }&#10;&#10;    /**&#10;     * EJEMPLO 7: Verificar si el usuario está logueado&#10;     */&#10;    public void checkLoginStatusExample() {&#10;        BuildersKt.launch(coroutineScope, Dispatchers.getIO(), null, (scope, continuation) -&gt; {&#10;            try {&#10;                boolean isLoggedIn = authRepository.isLoggedIn(continuation);&#10;&#10;                if (isLoggedIn) {&#10;                    Log.d(TAG, &quot;Usuario está autenticado&quot;);&#10;                    // Mostrar pantalla principal&#10;                } else {&#10;                    Log.d(TAG, &quot;Usuario no autenticado&quot;);&#10;                    // Mostrar pantalla de login&#10;                }&#10;            } catch (Exception e) {&#10;                Log.e(TAG, &quot;Error verificando login: &quot; + e.getMessage(), e);&#10;            }&#10;&#10;            return kotlin.Unit.INSTANCE;&#10;        });&#10;    }&#10;}&#10;&#10;/**&#10; * CÓMO USAR EN UNA ACTIVITY DE JAVA:&#10; *&#10; * public class LoginActivity extends AppCompatActivity {&#10; *&#10; *     private AuthExampleJava authExample;&#10; *&#10; *     @Override&#10; *     protected void onCreate(Bundle savedInstanceState) {&#10; *         super.onCreate(savedInstanceState);&#10; *         setContentView(R.layout.activity_login);&#10; *&#10; *         authExample = new AuthExampleJava(this);&#10; *&#10; *         Button loginButton = findViewById(R.id.loginButton);&#10; *         EditText emailInput = findViewById(R.id.emailInput);&#10; *         EditText passwordInput = findViewById(R.id.passwordInput);&#10; *&#10; *         loginButton.setOnClickListener(v -&gt; {&#10; *             String email = emailInput.getText().toString();&#10; *             String password = passwordInput.getText().toString();&#10; *&#10; *             authExample.loginExample(email, password);&#10; *         });&#10; *     }&#10; * }&#10; */&#10;&#10;/**&#10; * NOTA IMPORTANTE:&#10; *&#10; * Este proyecto está principalmente diseñado para Kotlin con Jetpack Compose.&#10; * Si prefieres usar Java con XML layouts tradicionales, necesitarás:&#10; *&#10; * 1. Crear layouts XML en res/layout/&#10; * 2. Crear Activities tradicionales (no Compose)&#10; * 3. Adaptar el código de coroutines a callbacks o RxJava&#10; * 4. Usar LiveData en lugar de StateFlow&#10; *&#10; * Recomendación: Usar Kotlin con Compose es más moderno y simple.&#10; */&#10;&#10;" />
            </PendingDiffInfo>
          </value>
        </entry>
      </map>
    </option>
  </component>
</project>